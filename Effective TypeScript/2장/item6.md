# 2장 타입스크립트의 타입 시스템
타입 시스템이란 무엇인지, 어떻게 사용해야 하는지, 무엇을 결정해야 하는지, 가급적 사용하지 말아야 할 기능은 무엇인지 알아본다.

# 아이템 6: 편집기를 사용하여 타입 시스템 탐색하기
TS를 설치하면,<br>
- TS 컴파일러(tsc)
- 단독으로 실행할 수 있는 TS 서버(tsserver)
를 실행할 수 있다.

보통은 tsc를 실행하는 것이 주된 목적이지만, TS서버 또한 `언어 서비스`를 제공한다는 점에서 중요하다. 언어 서비스에는 코드 자동완성, 명세(사양) 검사, 검색, 리팩터링이 포함된다. 보통은 편집기를 통해서 언어 서비스를 사용하는데, TS서버에서 언어 서비스를 제공하도록 설정하는 게 좋다.<br>

## 편집기를 사용하면 어떻게 타입 시스템이 동작하는지, TS가 어떻게 타입을 추론하는지 개념을 잡을 수 있다.
이러한 서비스들을 차치하더라도, 편집기는 코드를 빌드하고 타입 시스템을 익힐 수 있는 최고의 수단이다. 그리고 편집기는 TS가 언제 타입 추론을 실행할 수 있는지에 대한 개념을 잡게 해 주는데, 이 개념을 확실히 잡아야 간결하고 읽기 쉬운 코드를 작성할 수 있다.

편집기마다 조금씩 다르지만 보통의 경우에는 심벌 위에 마우스 커서를 대면 TS가 그 타입을 어떻게 판단하고 있는지 확인할 수 있다. 조건문의 분기에서 값의 타입이 어떻게 변하는지 살펴보는 것은 타입 시스템을 연마하는 매우 좋은 방법이다. 또한, 객체에서는 개별 속성을 살펴봄으로써 TS가 어떻게 각각의 속성을 추론하는지 살펴볼 수 있다.<br>
만약 연산자 체인(chain) 중간의 추론된 제너릭 타입을 알고 싶다면, 메서드 이름을 조사하면 된다.
``` ts
path.split('/').slice(1).join('/')
```
에서 slice에 마우스를 대면 `(method) Array<string>.slice(start?: number, end?: number): string[]`이라고 나온다. 여기서 split결과의 타입이 string의 배열이라고 추론되었음을 의미한다.

편집기상의 타입 오류를 살펴보는 것도 타입 시스템의 성향을 파악하는 데 좋은 방법이다.
``` ts
function getElement(elOrId: string | HTMLElement | null): HTMLElement {
  if(typeof elOrId === 'object') {
    return erOrId; // HTMLElement | null 형식은 HTMLElement 형식에 할당할 수 없습니다.
  } else if(elOrId === null) {
    return document.body;
  } else {
    const el = document.getElementById(elOrId);
    return el; // HTMLElement | null 형식은 HTMLElement 형식에 할당할 수 없습니다.
  }
}
```
if문의 의도는 단지 HTMLElement라는 객체를 골라내는 것이었다. but JS에서 `typeof null`은 `object`이므로, `erOrId`는 여전히 분기문 내에서 `null`일 가능성이 있다. 그러므로 처음에 `null`체크를 추가해서 바로잡는다.<br>
else문은 `document.getElementById`가 `null`을 반환할 가능성이 있어서 발생했고, 첫 번째 오류와 동일하게 `null`체크를 추가하고 예외를 던져야 한다.

## TS가 동작을 어떻게 모델링하는지 알기 위해 타입 선언 파일을 찾아보는 방법을 터득해야 한다.
또한, 언어 서비스는 라이브러리, 라이브러리의 타입 선언을 탐색할 때 도움이 된다.
``` ts
const response = fetch('https://example.com');
```
코드 내에서 `fetch`함수가 호출되고, 이 함수를 더 알아보길 원한다고 가정할 때, 편집기의 `Go to Definition`옵션을 제공한다. 이 옵션을 선택하면 TS에 포함되어 있는 DOM 타입 선언인 `lib.dom.d.ts`로 이동한다. 이를 통해 해당 함수가 어떤 매개변수를 받고 어떤 값을 반환하는지 파악할 수 있다.<br>
결론적으로 타입 선언은 TS가 무엇을 하는지, 어떻게 라이브러리가 모델링되었는지, 어떻게 오류를 찾아낼지 살펴볼 수 있는 훌륭한 수단이라는 것을 알 수 있다.
