# 다른 타입에는 다른 변수 사용하기

js에서는 한 변수를 다른 목적을 가지는 다른 타입으로 재사용해도 된다.

```js
let id = '12-34-56';
fetchProduct(id); // string으로 사용
id = 123456;
fetchProductBySerialNumber(id); // number로 사용
```

반면 ts에서는 오류가 발생한다. id의 타입을 string으로 추론했기 때문에 number타입을 할당할 수 없기 때문이다.

여기서 **변수의 값은 바뀔 수 있지만 그 타입은 보통 바뀌지 않는다**는 중요한 관점을 알 수 있다. 타입을 바꿀 수 있는 한 가지 방법은 범위를 좁히는 것인데, 새로운 변수값을 포함하도록 확장하는 것이 아니라 타입을 더 작게 제한하는 것이다.

id의 타입을 바꾸지 않으려면, `string | number`로 모두 포함할 수 있도록 타입을 확장하면 된다. 유니온 타입이라고 한다. 할당문에서 유니온 타입으로 범위가 좁혀졌기 때문에 작동한다.

유니온 타입으로 코드가 동작하기는 하겠지만 더 많은 문제가 생길 수 있다.

id를 사용할 때마다 값이 어떤 타입인지 확인해야 하기 때문에 유니온 타입은 string, number같은 간단한 타입에 비해 다루기 더 어렵다. 차라리 별도의 변수를 도입하는 것이 낫다.

별도의 변수를 사용하는 게 바람직한 이유는 다음과 같다.
- 서로 관련이 없는 두 개의 값을 분리.(id, serial)
- 변수명을 더 구체적으로 지을 수 있다.
- 타입 추론을 향상시키며, 타입 구문이 불필요해진다.
- 타입이 좀 더 간결해진다.(string | number 대신 string과 number 사용)
- let 대신 const로 변수를 선언하게 된다. 타입 체커가 타입을 추론하기에도 좋다.

타입이 바뀌는 변수는 되도록 피해야 하며, 목적이 다른 곳에는 별도의 변수명을 사용해야 한다.

그런데 **가려지는 변수**를 혼동해서는 안 된다.

```js
let id = '12-34-56';
fetchProduct(id); // string으로 사용

{
  id = 123456;
  fetchProductBySerialNumber(id); // number로 사용
}
```
여기서 두 id는 이름이 같지만 실제로는 서로 아무런 관계가 없다. 그러므로 각기 다른 타입으로 사용되어도 문제없다. 그런데 동일한 변수명에 타입이 다르다면, ts 코드는 잘 동작할지 몰라도 사람에게 혼란을 줄 수 있다.

따라서 목적이 다른 곳에는 별도의 변수명을 사용해야 한다. 린터 규칙을 통해 **가려지는 변수**를 사용하지 못하도록 할 수 있다.

# 요약
- 변수의 값은 바뀔 수 있지만 타입은 일반적으로 바뀌지 않는다.
- 혼란을 막기 위해 타입이 다른 값을 다룰 때에는 변수를 재사용하지 않도록 한다.
