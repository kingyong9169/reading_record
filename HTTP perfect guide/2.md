# 2장 : URL과 리소스
URL은 인터넷의 리소스를 가리키는 표준이름이다. URL은 전자정보 일부를 가리키고 그것이 어디에 있고 어떻게 접근할 수 있는지 알려준다.

## 목차
1. URL문법, 여러 URL 컴포넌트가 어떤 의미를 가지며 무엇을 수행하는지.
2. 여러 웹 클라이언트가 지원하는 상대 URL과 확장 URL같은 단축 URL에 대해서.
3. URL의 인코딩과 문자 규칙.
4. 여러 인터넷 정보 시스템에 적용되는 공통 URL 스킴.
5. 기존 이름은 유지하면서 객체들을 다른 장소로 옮기는 것을 가능하게 해주는 URN을 포함한 URL의 미래.

## 2.1 인터넷의 리소스 탐색하기
- URL은 브라우저가 정보를 찾는데 필요한 리소스의 위치를 가리킨다.
- URL을 이용해 사람과 애플리케이션이 인터넷상의 수십억 개의 리소스를 찾고 사용하며 공유할 수 있다.
- URL을 통해 사람이 HTTP 및 다른 프로토콜을 통해 접근할 수 있다.
- 사용자는 브라우저에 URL을 입력하고 브라우저는 화면 뒤에서 사용자가 원하는 리소스를 얻기 위해서 적절한 프로토콜을 사용하여 메시지를 전송한다.

URL은 URI라고 불리는 더 일반화된 부류의 부분집합이다. URI는 URL, URN으로 구성된 종합적인 개념이다. URN은 현재 그 리소스가 어디에 존재하든 상관없이 그 이름만으로 리소스를 식별하는데 비해 URL은 리소스가 어디 있는지 설명해서 리소스를 식별한다.

HTTP명세에세는 URI를 더 일반화된 개념의 리소스 식별자로 사용한다. but 실제로 HTTP 애플리케이션은 **URL을 URI의 한 부분**으로 취급한다.

`http://www.naver.com/season/index.html`
- URL의 첫 부분인 http는 URL의 스킴`(어떻게)`이다. 스킴은 웹 클라이언트가 리소스에 어떻게 접근하는지 알려준다. 이 경우에 URL이 HTTP 프로토콜을 사용한다.
- URL의 두 번째 부분인 www~은 서버의 위치`(호스트(어디에))`이다. 이는 웹 클라이언트가 리소스가 어디에 호스팅되어 있는지 알려준다.
- URL의 세 번째 부분인 /season~은 리소스의 경로`(무엇을)`다. 경로는 서버에 존재하는 로컬 리소스들 중에서 요청받은 리소스가 무엇인지 알려준다.

- URL은 인터넷에 있는 어떤 리소스든지 가리킬 수 있다. 우리가 원하는 리소스가 어디에 위치하고 어떻게 가져오는지 정의한다.
- URL을 사용하면 리소스를 일관된 방식으로 지칭할 수 있다. 인터넷상의 모든 리소스를 가리키고 가져오기 위해, 모든 사람이 같은 방식으로 이름을 써서 리소스를 찾을 수 있도록, 단일 방식의 작명 규칙을 가진 것이다.
- URL은 애플리케이션이 리소스에 접근할 수 있는 방법을 제공한다.

## 2.2 URL 문법

```
<스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>
```
1. 스킴: 프로토콜 ex) http
2. 사용자 이름: 몇몇 스킴은 리소스에 접근하기 위해 사용자 이름을 필요로 한다. ex) FTP
3. 비밀번호: 사용자 비밀번호, 이름에 콜론으로 이어서 기술 
4. 호스트: 호스팅하는 서버의 호스트 명 혹은 IP주소
5. 포트: 호스팅하는 서버가 열어놓은 포트번호. 많은 스킴이 기본 포트를 가지고 있다.
6. 경로: 서버 내 리소스가 어디 있는지 가리킴. 경로 분법은 서버와 스킴에 따라 다르다.
- 경로조각으로 나눌 수 있음.
- 각 조각은 자체 파라미터를 가질 수 있음
7. 파라미터: 특정 스킴들에서 입력 파라미터를 기술하는 용도.
- 여러 개를 가질 수 있음
- URL을 사용하는 애플리케이션이 리소스에 접근하려면 프로토콜 파라미터가 필요함.
- 사용자가 서버에 정확한 요청을 하기 위해 필요한 입력 파라미터를 받는데 사용함.
- 다른 파라미터나 경로의 일부를 ;로 구분하여 기술함.
- 이름/값 쌍으로 가진다. 이름=값 형태.
8. 질의: 스킴에서 애플리케이션에 파라미터를 전달하는데 쓰임.
- 요청받을 리소스 형식의 범위를 좁히기 위해서 질의를 받을 수 있음.
9. 프래그먼트: 리소스의 조각이나 일부분을 가리킴.
- 서버에 전달되지 않고 클라이언트에서만 사용.
- HTML 문서에 있는 특정 이미지나 일부분을 가리킬 수 있음

## 2.3 단축 URL
- 상대 URL은 리소스 안에 있는 리소스를 간결하게 기술하는데 사용할 수 있다.
- 많은 브라우저가 사용자가 기억하고 있는 URL 일부를 입력하면 나머지 부분을 자동으로 입력해주는 URL 자동 확장을 지원한다.

### 2.3.1 상대 URL
URL은 상대, 절대로 나뉨.
- 절대는 리소스에 접근하는데 필요한 모든 정보를 가지고 있음.
- 상대 URL은 모든 정보를 담고 있는 않다.
- 상대 URL로 리소스에 접근하는데 필요한 모든 정보를 얻기 위해서는, 기저(base)라고 하는 다른 URL을 사용해야 한다.
- 상대 URL은 URL을 짧게 표현하는 방식이다.
- 상대 URL 문법에 따르면 HTML 작성자는 URL에 스킴과 호스트, 다른 컴포넌트들을 모두 입력하지 않아도 된다. 그 정보는 컴포넌트가 포함된 리소스의 기저 URL에서 알아낼 수 있다.
- 다른 리소스에 대한 URL 역시 상대 URL로 기술할 수 있다.
- http://www.naver.com/tools.html과 ./hammers.html
- 상대 URL은 프래그먼트이거나 URL일부이다.
- 상대 URL을 사용하면 리소스 집합(HTML 페이지 등)을 쉽게 변경할 수 있다.

기저 URL
- 변환 과정의 첫 단계는 기저 URL을 찾는 것.
- 상대 URL의 기준이 된다. 그것을 가져오는 몇 가지 방법이 있따.

리소스에서 명시적으로 제공
- 어떤 리소스들은 기저 URL을 명확하게 기술하기도 한다. HTML 문서에서는 그 안에 있는 모든 상대 URL을 변경하기 위해 기저 URL을 가리키는 <BASE>태그를 기술할 수 있다.

리소스를 포함하고 있는 기저 URL
- 기저 URL이 명시되지 않은 리소스에 포함된 경우, 해당 리소스의 URL을 기저 URL로 쓸 수 있다.

기저 URL이 없는 경우
- 절대 URL만으로 이루어져 있다는 뜻이다. but 불완전하거나 깨진 URL일 수도 있다.

### 상대 참조 해석하기
상대 URL을 절대 URL로 변환하기 위한 다음 단계: 상대 URL과 기저 URL을 각각의 컴포넌트 조각으로 나누는 것. 사실상 이것은 URL을 파싱하는 것에 불과하지만, 컴포넌트 단위로 분리한다는 점에서 이 작업을 'URL분해하기'라고 부르기도 한다. 기저 URL과 상대 URL을 컴포넌트로 분해하고 나면, 변환을 끝내기 위해 알고리즘을 사용할 수 있다.

이 알고리즘은 상대 URL을 리소스를 참조하는데 사용할 수 있는 절대 경로 형태로 변환한다.

1. 경로: ./hammers.html, 기저 URL: http://www.naver.com/tools.html
2. 스킴이 비어 있으면 알고리즘에 따라 기저 URL의 스킴을 상속받는다.(http)
3. 모든 컴포넌트가 비어 있다면 호스트와 포트 컴포넌트를 상속받는다.
4. 상대 URL 컴포넌트와 상속받은 컴포넌트(스킴, 호스트, 포트)를 합치면, 새로운 절대 URL이 생긴다.

### 2.4.2 인코딩 체계
안전한 문자 집합을 이용하는 경우 그 표현의 한계를 넘기 위해, URL에 있는 안전하지 않은 문자들을 표현할 수 있는 인코딩 방식이 고안됨. 인코딩은 안전하지 않은 문자를 %기호로 시작해, ASCII코드로 표현되는 두 개의 16진수 숫자로 이루어진 이스케이프 문자로 바꾼다.

### 2.4.3 문자 제한
몇몇 문자는 URL 내에서 특별한 의미로 예약되어 있음. 어떤 문자는 US-ASCII의 출력 가능한 문자 집합에 포함되어 있지 않다. 그리고 어떤 문자는 몇몇 인터넷 게이트웨이와 프로토콜에서 혼동되는 것으로 알려 있어서, 사용이 꺼려지기도 했다.

## 2.5 스킴의 바다
1. http
- 사용자 이름이나 비밀번호가 없다는 것을 제외하고, 일반 URL 포맷을 지키는 하이퍼텍스트 전송 프로토콜 스킴이다.
- 포트값은 기본 80이다.
- http://<호스트>:<포트>/<경로>?<질의>#<프래그먼트>
2. https
- http 스킴과 거의 같음. https는 http의 커넥션의 양 끝단에서 암호화하기 위해 넷스케이프에서 개발한 보안 소켓 계층(Secure Sockets Layer, SSL)을 사용한다.
- 기본 포트값은 443
- https://<호스트>:<포트>/<경로>?<질의>#<프래그먼트>
3. mailto
- mailto URL은 이메일 주소를 가리킴.
- 이메일은 다른 스킴과는 다르게 동작하기 때문에 표준 URL과는 다른 포맷을 가짐.
- mailto:<RFC-822-addr-spec> -> mailto:drdragon777@naver.com
4. ftp
- 파일 전송 프로토콜 URL은 FTP 서버에 있는 파일을 내려 받거나 올리고, FTP 서버의 디렉터리에 있는 컨텐츠 목록을 가져오는데 사용할 수 있음.
- 웹과 URL이 출현하기 전부터 있었음.
- 웹 애플리케이션은 데이터에 접근하는 용도의 스킴으로 FTP을 사용함.
- ftp://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>
5. rtsp, rtspu
- 실시간 스트리밍 프로토콜(Real Time Streaming Protocol)을 통해서 읽을 수 있는 오디오 및 비디오와 같은 미디어 리소스 식별자다.
- rtspu 스킴에 있는 u는 리소스를 읽기 위해서 UDP 프로토콜이 사용됨을 뜻한다.
- rtsp://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>, rtspu도 같음
6. file
- 주어진 호스트 기기(로컬 디스크, 네트워크 파일 시스템 혹은 기타 파일 공유 시스템)에서 바로 접근할 수 있는 파일들을 나타냄.
- 각 필드도 일반적인 URL 포맷을 따름
- file://<호스트>/<경로>
7. telnet
- 대화형 서비스에 접근하는데 사용
- telnet URL 자체가 객체를 가리키지는 않지만, 리소스라고 할 수 있는 대화형 애플리케이션은 telnet프로토콜을 통해 접근할 수 있다.
- telnet://<사용자 이름>:<비밀번호>@<호스트>:<포트>/
8. news
- RFC 1036에 정의된 바와 같이 특정 문서나 뉴스 그룹에 접근하는데 사용함.
- 리소스의 위치 정보를 충분히 포함하지 않는 특이한 속성이 있음.
- 해당 리소스가 어디에 있는지에 대한 정보를 포함하지는 않는다. 호스트 명, 서버 이름도 제공하지 않는다.
- 사용자로부터 그 정보를 알아내는 것은 애플리케이션의 몫.
- 뉴스 리소소는 여러 서버를 통해 접근할 수 있다. 뉴스 리소스에 접근하는 것이 하나의 서버로만 접근할 수 있는 게 아니므로, 위치에 독립적임.

## 2.6 미래
URL은 주소이지 실제 이름은 아님. URL이 특정 시점에 어떤 것이 위치한 곳을 알려준다는 것을 뜻함. URL은 리소스를 찾는데 필요한 포트와 서버 이름을 제공함. 이런 스킴의 단점은 리소스가 옮겨지면 URL을 더는 사용할 수 없다는 것이다. 그리고 그 시점에 기존 URL이 가리키고 있던 객체를 찾을 방법이 없어진다.
